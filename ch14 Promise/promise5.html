<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    //finally方法用于指定不管 Promise 对象最后状态如何，都会执行的操作

    Promise.prototype.finally2 = function (callback) {
        let P = this.constructor;
        return this.then(
               value  => P.resolve(callback()).then(() => value),
               reason => P.resolve(callback()).then(() => { throw reason })
        );
    };
    new Promise((resolve,reject) =>{
        resolve("finally test");
    }).finally2(() => console.log("finally2"));
</script>
</body>
</html>